document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("__error"),e.classList.add("__error")}function s(e){e.parentElement.classList.remove("__error"),e.classList.remove("__error")}function n(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let l=function(e){let a=0,l=document.querySelectorAll(".__req");for(let e=0;e<l.length;e++){const r=l[e];s(r),r.classList.contains("__email")?n(r)&&(t(r),a++):""===r.value&&(t(r),a++)}return a}(),r=new FormData(e);if(0===l){document.getElementsByClassName("feedback")[0].classList.add("__sending");let t=await fetch("./sendmail.php",{method:"POST",body:r});if(t.ok){let s=await t.json();alert(s.message),e.reset(),document.getElementsByClassName("feedback")[0].classList.remove("__sending")}else alert("Ошибка json: возможно сервер не запущен"),document.getElementsByClassName("feedback")[0].classList.remove("__sending")}else alert("Заполните обязательные поля!")}))}));